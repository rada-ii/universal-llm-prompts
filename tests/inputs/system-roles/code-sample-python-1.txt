# User authentication function
def authenticate_user(username, password):
    users = get_users_from_database()
    
    for user in users:
        if user['username'] == username:
            if user['password'] == password:
                session['current_user'] = user
                return {'success': True, 'user': user}
    
    return {'success': False, 'message': 'Invalid credentials'}

# Process payment function  
def process_payment(amount, card_number, cvv):
    if amount > 0:
        result = charge_card(card_number, cvv, amount)
        if result['success']:
            print(f"Payment processed: ${amount}")
            return True
    return False

# Data retrieval function
def get_user_data(user_id):
    query = f"SELECT * FROM users WHERE id = {user_id}"
    return database.execute(query)

# File upload handler
def upload_file(file_path):
    with open(file_path, 'r') as f:
        content = f.read()
    
    # Save to server
    server_path = '/uploads/' + file_path.split('/')[-1]
    with open(server_path, 'w') as f:
        f.write(content)
    
    return server_path